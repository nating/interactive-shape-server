<!DOCTYPE html>
<html lang="en">

  <head>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <meta name="author" content="">

    <title>Interactive Shape Server</title>

    <!-- Bootstrap core CSS -->
    <link href="https://rawgit.com/BlackrockDigital/startbootstrap-business-casual/master/vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet" type="text/css">

    <!-- Custom fonts for this template -->
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800" rel="stylesheet" type="text/css">
    <link href="https://fonts.googleapis.com/css?family=Josefin+Slab:100,300,400,600,700,100italic,300italic,400italic,600italic,700italic" rel="stylesheet" type="text/css">

    <!-- Custom styles for this template -->
    <link href="https://rawgit.com/BlackrockDigital/startbootstrap-business-casual/master/css/business-casual.css" rel="stylesheet" type="text/css">

  </head>

  <body style="background-color: black;">

    <!-- Navigation -->
    <nav class="navbar navbar-expand-lg navbar-light bg-faded py-lg-4">
      <div class="container">
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarResponsive">
          <ul class="navbar-nav mx-auto">
            <li class="nav-item active px-lg-4">
              <a class="nav-link text-uppercase text-expanded" href="index.html">Home
                <span class="sr-only">(current)</span>
              </a>
            </li>
            <li class="nav-item px-lg-4">
              <a class="nav-link text-uppercase text-expanded" href="about.html">Load Demo Shapes</a>
            </li>
            <li class="nav-item px-lg-4">
              <a class="nav-link text-uppercase text-expanded" href="blog.html">See Source</a>
            </li>
          </ul>
        </div>
      </div>
    </nav>

    <div class="container">

      <div class="bg-faded p-4 my-4">
        <!-- Image Carousel -->
        <div id="carouselExampleIndicators" class="carousel slide" data-ride="carousel">
          <div class="carousel-inner" role="listbox">
            <div class="carousel-item active">
              <img class="d-block img-fluid w-100" src="img/slide-1.jpg" alt="">
            </div>
        </div>
        <!-- Welcome Message -->
        <div class="text-center mt-4">
          <div class="text-heading text-muted text-lg">Welcome To</div>
          <h1 class="my-2">The Interactive Shape Server</h1>
          <div class="text-heading text-muted text-lg">
            <strong>By Geoffrey Natin</strong>
          </div>
        </div>
        <div id="svgBox">
          <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" width="700" height="500" viewBox="0 0 100 100">
            <g transform="rotate(50)">
              <circle cy="2" cx="2" r="40" stroke="black" stroke-width="3" fill="red"/>
              <rect width="20" height="20" fill="blue"/>
              <rect width="10" height="20" fill="green"/>
              <path d="L 2,3 M 4,5 "/>
            </g>
          </svg>
        </div>
      </div>

    </div>


      <div class="bg-faded p-4 my-4 text-center">
        <hr class="divider">
        <h2 class="text-center text-lg text-uppercase my-0">Watch your shapes come to life.
        </h2>
        <hr class="divider">
        <div class="form-group">
          <textarea class="form-control" rows="5" id="shapes-input"></textarea>
        </div>
          <button onclick="renderSvg()" id="button" class="text-center btn btn-primary">Render my Shapes</button>
      </div>

    <!-- /.container -->

    <footer class="bg-faded text-center py-5">
      <div class="container">
        <p class="m-0">Copyright &copy; Geoffrey Natin 2017</p>
      </div>
    </footer>

  </body>
  <script>

    document.getElementById("button").addEventListener("click",function(){renderSvg();});

    function renderSvg() {
      var input = document.getElementById("shapes-input").value; 
      fetch("/"+btoa(input), {  
          method: 'POST'
      })
      .then(function (data) {  
        console.log('Request success: ', data);
        var svgResponse = data.text().then(function (t){
          console.log(t);
          var svgBox = document.getElementById('svgBox');
          svgBox.innerHTML = t;
        });  
      })  
      .catch(function (error) {  
        //TODO: Add some code here to alert that there was an error
        console.log('Request failure: ', error);  
      });
    }
  </script>

</html>
